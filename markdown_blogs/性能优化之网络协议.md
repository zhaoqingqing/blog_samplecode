本文以我的经验来谈一下，在开发过程中处理网络协议的几种优化方法。

​       

### 根据优先级处理或控制数量

控制每一帧处理的网络在60条左右，如果数量特别大，还可以根据网络协议的重要性按优先级进行先后处理

​      

### 数据包合理化

在我经历的rpg项目中，对于一些奖励类的协议，碰到过部分同学喜欢通过一条协议来做全量和增量的通知。

比如玩家领取了某个条目，会收到全部条目的更新协议，而不是只有变化的部分，一般这么做的原因：

1. 整体条目少全量数据也不大
2. 部分同学偷懒的一种处理方式

​      

### 减少单个数据包的大小

比如一条协议有10个字段，此次更新只修改了1个字段，其余9个字段无需传输过来。

解法，可以在网络传输时，添加一个bool值，判断是否有传递值，比如：

```c#
public bool Has_Recv_name;
public string name;

public bool Has_Recv_level;
pubing int level;

//当玩家只有等级发生改变时，传递过来的数据包里只有Has_Recv_name=false和level=99，不需要把没有变化的name也同传输过来。

//当然，客户端在收到协议进行赋值前，也需要判断Has_Recv_xxx==true,才进行保存新值。
```

​      

### 不直接引用网络数据



